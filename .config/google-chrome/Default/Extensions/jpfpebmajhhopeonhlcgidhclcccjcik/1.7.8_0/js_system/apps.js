var completeList=[];var appList=[];function getIconURL(d){var c={size:0};if(!d.icons||d.icons.length==0){return chrome.extension.getURL("icon64.png")}for(var a=0;a<d.icons.length;a++){var b=d.icons[a];if(b.size>c.size){c=b}}return c.url}function appUninstall(b,a){if(confirm(i18n("apps_do_you_want_to_uninstall"))){chrome.management.uninstall(b,function(){show_message(i18n("apps_app_uninstalled"));$(a).remove()})}}function launchApp(a){chrome.management.launchApp(a);window.close()}function compare(d,c){return(d>c)?1:(d==c?0:-1)}function compareByName(b,a){return compare(b.name.toLowerCase(),a.name.toLowerCase())}function addApp(e,h,f){if(typeof h=="undefined"){return false}if(h.id=="nmmhkkegccagdldgiimedpiccmgmieda"){return false}var b=document.createElement("li");b.setAttribute("rel",h.id);b.setAttribute("data-options",h.optionsUrl);if(h.mayDisable===false){b.setAttribute("data-uninstall","false")}if(f=="sidebar"){b.setAttribute("class","app");b.onclick=function(a){launchApp(h.id)};var c=document.createElement("a");c.setAttribute("href",h.appLaunchUrl);var d=document.createElement("img");d.src=getIconURL(h);var g=document.createElement("span");g.className="app_title";g.innerText=h.name;c.appendChild(d);c.appendChild(g);b.appendChild(c)}if(f=="dial"){b.onclick=function(a){launchApp(h.id)};var c=document.createElement("a");var d=document.createElement("img");d.src=getIconURL(h);var g=document.createElement("span");g.className="apptitle";g.innerText=h.name;c.appendChild(d);c.appendChild(g);b.appendChild(c)}e.appendChild(b)}function showApps(){var a=document.getElementById("apps_ul");a.innerHTML="";for(var b=0;b<appList.length;b++){var c=appList[b];addApp(a,c,"sidebar")}$("#apps_ul").sortable({forcesize:true,axis:"y",tolerance:"pointer",stop:function(g,h){var d=$("#apps_ul li");var f=new Array();for(var e=0;e<d.length;e++){f.push($(d[e]).attr("rel"))}localStorage["options.appOrder"]=JSON.stringify(f)}})}function showAppsAsDials(){var a=document.getElementById("appspanel");a.innerHTML="";for(var b=0;b<appList.length;b++){var c=appList[b];addApp(a,c,"dial")}_width=$(a).find("li").width();_l=($("#appspanel li").length);a.style.width=_l*(_width)}function loadApps(a){chrome.management.getAll(function(f){var e=0;for(var c=0;c<f.length;c++){if(f[c].isApp){e++}}completeList=f.sort(compareByName);appList=[];var b=[];if(typeof localStorage["options.appOrder"]!="undefined"){b=JSON.parse(localStorage["options.appOrder"])}for(var c=0;c<completeList.length;c++){var d=completeList[c];if(!d.isApp||!d.enabled){continue}if(b.length>0){if(parseInt(jQuery.inArray(completeList[c].id,b))>=0){appList[jQuery.inArray(completeList[c].id,b)]=d}else{appList[99-c]=d}}else{appList.push(d)}}appList.push({appLaunchUrl:"https://chrome.google.com/webstore/category/home",optionsUrl:"",enabled:true,icons:[{size:128,url:"chrome://extension-icon/ahfgeienlihckogmohjhadlkjgocpleb/128/1"}],id:"ahfgeienlihckogmohjhadlkjgocpleb",name:"Chrome Web Store",mayDisable:false});if(a=="sidebar"){showApps()}else{if(a=="dial"){showAppsAsDials()}}})}$(function(){if(localStorage["options.apps.show"]==1){switch(getValue("options.apps.align")){case"left":$("#appspanel_wrapper").addClass("apps_alignleft");break;case"right":$("#appspanel_wrapper").addClass("apps_alignright");break}switch(getValue("options.apps.position")){case"top":$("#appspanel_wrapper").addClass("apps_top");break}switch(getValue("options.apps.theme")){case"transparent":$("#appspanel_wrapper").addClass("apps_transparent");break;case"dark":$("#appspanel_wrapper").addClass("apps_dark");break}switch(getValue("options.apps.iconsize")){case"extrasmall":$("#appspanel_wrapper").addClass("apps_extrasmall");break;case"small":$("#appspanel_wrapper").addClass("apps_small");break;case"large":$("#appspanel_wrapper").addClass("apps_large");break}loadApps("dial");$("#appspanel").css("padding","0% "+((100-parseInt(localStorage["options.dialSpace"]))/2)+"%");$("#appspanel").sortable({placeholder:"sortableplaceholder",axis:"x",tolerance:"pointer",stop:function(d,e){var a=$("#appspanel li");var c=new Array();for(var b=0;b<a.length;b++){c.push($(a[b]).attr("rel"))}localStorage["options.appOrder"]=JSON.stringify(c)}});$("#appspanel_wrapper").mousewheel(function(a,b){this.scrollLeft-=(b*80);a.preventDefault()})}});