(function(){ /*
 Copyright 2010 Google Inc.  All Rights Reserved.
 Your use of this software is subject to the Terms of Service located
 at https://chrome.google.com/extensions/intl/en/gallery_tos.html.
*/
var idmcs_a=function(a,b,c){return a.call.apply(a.bind,arguments)},idmcs_b=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,f);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}},idmcs_=function(a,b,c){idmcs_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?idmcs_a:idmcs_b;return idmcs_.apply(null,
arguments)},idmcs_c=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a};Function.prototype.bind=Function.prototype.bind||function(a,b){if(1<arguments.length){var c=Array.prototype.slice.call(arguments,1);c.unshift(this,a);return idmcs_.apply(null,c)}return idmcs_(this,a)};Function.prototype.partial=function(a){var b=Array.prototype.slice.call(arguments);b.unshift(this,null);return idmcs_.apply(null,b)};
Function.prototype.inherits=function(a){idmcs_c(this,a)};Function.prototype.mixin=function(a){var b=this.prototype,c;for(c in a)b[c]=a[c]};var idmcs_d=/\s+|\S+/g;Array.prototype.peek=function(){return this[this.length-1]};function idmcs_e(a){return"url("+chrome.extension.getURL("images/"+a)+")"}function idmcs_f(a){a.css("background-image",idmcs_e("close.png"));a.mouseover(function(){jQuery("body").hasClass("goog_qs-closed")||jQuery(this).css("background-image",idmcs_e("close_on.png"))});a.mouseout(function(){jQuery("body").hasClass("goog_qs-closed")||jQuery(this).css("background-image",idmcs_e("close.png"))})};function idmcs_g(){jQuery("#goog_qs_tidbit_box").toggle();var a=1==jQuery("#goog_qs_tidbit_box:hidden").length;chrome.extension.connect({name:"minimized-state"}).postMessage({minimized:a})}function idmcs_h(){var a=chrome.extension.getURL("about.html");chrome.extension.connect({name:"open-link"}).postMessage({url:a})}
chrome.extension.onRequest.addListener(function(a){if(a.text&&0==jQuery("#goog_qs_tidbit_box").length){var b=a.text,c=jQuery('<div id="goog_qs-box-toggle" />');idmcs_f(c);c.click(idmcs_g);var f=jQuery('<div id="goog_qs-box-info" class="goog_qs-box-title" />');f.css("background-image",idmcs_e("icon16x16.png"));f.text(chrome.i18n.getMessage("qs_name"));var e=jQuery('<div id="goog_qs-box-msg" />');e.html(b);jQuery("<a>Learn more</a>");b=jQuery('<div id="goog_qs-box-tidbits" />');b.append(e);e=jQuery('<div id="goog_qs-wrapper" />');
e.append(c);e.append(f);e.append(b);c=jQuery('<div id="goog_qs_tidbit_box" style="display:none"/>');c.append(e);f=c.get(0);e=document.createTreeWalker(f,window.NodeFilter.SHOW_TEXT,null,!1);for(f=[];e.nextNode();)f.push(e.currentNode);for(e=0;e<f.length;e++){var b=f[e],h=b.data.match(idmcs_d);if(h){for(var k=b.parentNode,l=0;l<h.length;l++){var g=h[l],d;(d=2>g.length)||(d=20<g.length)||(d=g.charAt(0).charCodeAt(0),d=97<=d?122>=d?!1:128<=d?!1:!0:65<=d?90>=d?!1:!0:48<=d&&57>=d?!1:!0);d?k.insertBefore(document.createTextNode(g),
b):(d=jQuery('<span class="goog_qs-nowrap"/>').get(0),d.appendChild(document.createTextNode(g.charAt(0))),d.appendChild(document.createElement("img")),d.appendChild(document.createTextNode(g.substring(1))),k.insertBefore(d,b))}k.removeChild(b)}}jQuery("body").append(c);jQuery(".goog_qs-learn-more").click(idmcs_h)}a.toggle&&idmcs_g()}); })();
