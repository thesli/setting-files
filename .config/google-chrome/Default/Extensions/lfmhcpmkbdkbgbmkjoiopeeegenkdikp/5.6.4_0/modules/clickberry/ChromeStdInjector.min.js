function Clickberry(){function s(e){try{var t=document.getElementById(e);var n=t.src.toString().split("?");var r=n[n.length-1];r=r.split("&");var i={};for(var s=r.length-1;s>=0;s--){var o=r[s].split("=");i[o[0]]=o[1]}}catch(u){}return i}function u(e){console.log("Parametr: "+e);var t=window.document.URL.toString();if(t.indexOf("?")>0){var n=t.split("?");var r=n[1].split("&");var i=new Array(r.length);var s=new Array(r.length);var o=0;for(o=0;o<r.length;o++){var u=r[o].split("=");i[o]=u[0];if(u[1]!="")s[o]=unescape(u[1]);else s[o]=null}for(o=0;o<r.length;o++){if(i[o]==e){return s[o]}}return false}}var e={player:null,container:null,html5:false,tagVideo:null,cwidth:1,cheight:1,init:function(t,n){if(n.className.indexOf("html5-video-player")>-1){try{var n=document.getElementById("movie_player");e.tagVideo=document.getElementsByClassName("html5-main-video")[0];e.html5=true}catch(r){console.log("Invalid player")}}e.player=n;e.container=t;e.player.addEventListener("onStateChange","Clickberry.playerOnStateChangeListener");e.player.addEventListener("onPlaybackQualityChange","Clickberry.playerOnPlaybackQualityChangeListener");e.player.addEventListener("onError","Clickberry.playerOnErrorListener");if(e.html5){e.tagVideo.pause();e.tagVideo.play()}},setSize:function(t){var n=t.width,r=t.height;container.width=n;container.height=r;container.style.width=n;container.style.height=r;e.cwidth=n;e.cheight=r},seekTo:function(t){var n=e.html5?e.tagVideo.paused:false;var r=t.seconds,i=t.allowSeekAhead;var s=e.player.getDuration();if(r>=s){r=s-1}e.player.seekTo(r,i);if(e.html5){e.tagVideo.currentTime=r;if(n){e.tagVideo.pause()}}},getCurrentTime:function(){return e.player.getCurrentTime()},pauseVideo:function(){e.player.pauseVideo()},playVideo:function(){e.player.playVideo()},stopVideo:function(){e.player.stopVideo()},getVideoUrl:function(){return e.player.getVideoUrl()},loadVideoById:function(t){var n=t.videoId,r=t.startSeconds,i=t.suggestedQuality;e.player.loadVideoById(n,r,i)},getPlaybackQuality:function(){return e.player.getPlaybackQuality()},setPlaybackQuality:function(t){var n=t.suggestedQuality;e.player.setPlaybackQuality(n)},getDuration:function(){return e.player.getDuration()},addEventListener:function(e,t,n){console.log("set Event ",e);if(!Clickberry.eventsListeners[e]){Clickberry.eventsListeners[e]=[]}Clickberry.eventsListeners[e][n]=t},showTagger:function(){var e=document.getElementsByTagName("iframe");for(var n in e){if(e[n].getAttribute&&e[n].getAttribute("wndID")){e[n].contentWindow.postMessage({type:"startTagging"},"*")}}t.show()},closeTagger:function(){t.close()}};var t={playerLink:"",taggerContainer:null,player:null,playerContainer:null,tagButton:null,show:function(){t.taggerContainer.style.width="inherit";t.taggerContainer.style.height="inherit";var e=document.getElementById("clickberry_tag_button");e.style.display="none"},close:function(){t.taggerContainer.style.width="1px";t.taggerContainer.style.height="1px";var e=document.getElementById("clickberry_tag_button");e.style.display="block"},showButton:function(){t.tagButton.style.display="block"},hideButton:function(){t.tagButton.style.display="none"},onResize:function(){t.taggerContainer.style["margin-top"]="-"+t.playerContainer.clientHeight+"px";t.tagButton.style["margin-left"]=t.playerContainer.clientWidth/2-45/2+"px"},updatePlayer:function(n,r,i){if(r){e.init(n,r);t.player=r;t.playerContainer=n;t.playerLink=i;t.Element.TagButton();t.Element.Extension()}},controlPlayer:function(t,n,r){if(e[t]){var i=null;if(t!=="addEventListener"){i=e[t](n)}else{e[t](n["event"],r,n["request_id"])}if(i){r.postMessage({type:"returnControlParams",request_id:n["request_id"],result:i},"*")}}},Element:{Extension:function(){t.taggerContainer=document.createElement("div");t.taggerContainer.id="tagger-container";t.taggerContainer.style.width="1px";t.taggerContainer.style.height="1px";t.taggerContainer.style.position="absolute";t.taggerContainer.style.top="inherit";t.taggerContainer.style.left="inherit";t.taggerContainer.style.overflow="hidden";t.taggerContainer.style["z-index"]="100000";t.taggerContainer.style["margin-top"]="-"+t.playerContainer.clientHeight+"px";var n=document.createElement("div");n.style.width="100%";n.style.height="100%";n.id="tagger-container-inner";e.cwidth=t.playerContainer.clientWidth;e.cheight=t.playerContainer.clientHeight;setInterval(function(){t.onResize()},500);t.taggerContainer.appendChild(n);t.playerContainer.appendChild(t.taggerContainer);d(t.taggerContainer,t.playerLink,0,true)},TagButton:function(){var e=document.createElement("button");var n=f(t.player);e.value="Tag";e.id="clickberry_tag_button";e.innerHTML="Tag";e.style.margin="auto";e.style.display="none";e.style.height="17px";e.style.width="45px";e.style.position="absolute";e.style.cursor="pointer";e.style["margin-left"]=t.playerContainer.clientWidth/2-45/2+"px";e.style["margin-top"]="-22px";e.style["z-index"]="100000";e.style["background-color"]="#cc181e";e.style["color"]="white";e.style["text-align"]="center";e.style["border-radius"]="0px";e.style["box-shadow"]="1px 1px 1px black";e.style["font-size"]="12px";e.addEventListener("click",function(){t.Element.taggerEmbed()});t.tagButton=e;t.playerContainer.appendChild(e)},taggerEmbed:function(){e.showTagger()}}};var n="PROD";var r="standalone";var i=location.href;var o=function(e,t){var n=t||"";var r=Object.prototype.toString.call(e)==="[object Array]"?true:false;var i=r?"Array\n"+n+"[\n":"Object\n"+n+"{\n";for(var s in e){if(e.hasOwnProperty(s)){var u=e[s];var a="";var f=Object.prototype.toString.call(u);switch(f){case"[object Array]":case"[object Object]":a=o(u,n+"	");break;case"[object String]":a="'"+u+"'";break;default:a=u}i+=n+"	"+s+" => "+a+",\n"}}i=i.substring(0,i.length-2)+"\n"+n;return r?i+"]":i+"}"};var a=function(e){while(child=e.firstChild){e.removeChild(child)}};var f=function(e){var t=0,n=0;while(e){n+=e.offsetLeft;t+=e.offsetTop;e=e.offsetParent}return[n,t]};var l=function(e,t){if(!e){e="windowChanges"}var n=window.pageXOffset||document.documentElement.scrollLeft;var r=window.pageYOffset||document.documentElement.scrollTop;var i=document.getElementsByTagName("iframe");for(var s in i){if(i[s].getAttribute&&(i[s].getAttribute("wndID")||i[s].getAttribute("name")&&i[s].getAttribute("name").toString().indexOf("cbplayer")>=0)){var o=f(i[s]);var u=i[s].getAttribute("wndID");var a=i[s].contentWindow;var l=i[s].width;var c=i[s].height;if(t&&t===u||!t){a.postMessage({type:e,scrollX:n,scrollY:r,left:o[0],top:o[1],width:l,height:c,wndID:u},"*")}}}};var c=function(){var e=document.getElementById("player-api");if(e){var n=document.getElementById("movie_player");var r=location.href;if(ytplayer.config.args.allow_embed){if(n){t.updatePlayer(e,n,r)}else{d(e,r,1)}}}};var h=function(e){var t=e.toString().split("?");var n=t[0].toString().split("/");return n[n.length-1]};var p=function(){var e=document.getElementsByTagName("iframe");for(var t in e){var n=e[t].src;if(n&&(n.indexOf("youtube.com/embed")>0&&n.indexOf("youtube.com/embed")<20||n.indexOf("youtube-nocookie.com/embed")>0&&n.indexOf("youtube.com/embed")<20)){var r=h(n);e[t].setAttribute("wndID",r)}}};var d=function(e,t,i,s){var o="1";if(s){o="0"}e.id=e.id+"_";var u=e.offsetWidth;var c=e.offsetHeight;var h=f(e);var p=h[0];var v=h[1];var m="clickberry_tagger_"+Math.round(Math.random()*1e3);var g="https://clickberry.tv/extension/?productName=ClickBerry%20YouTube%20Extension&externalVideoLink="+encodeURIComponent(t)+"&width="+u+"&height="+c+"&left="+p+"&top="+v+"&wndID="+m+"&autoPlay="+i+"&acsNamespace=clickberry&addonType="+r+"&embed="+o;if(n==="QA"){g="https://qa.clickberry.tv/extension/?productName=ClickBerry%20YouTube%20Extension&externalVideoLink="+encodeURIComponent(t)+"&width="+u+"&height="+c+"&left="+p+"&top="+v+"&wndID="+m+"&autoPlay="+i+"&acsNamespace=clickqa&addonType="+r+"&embed="+o}if(n==="local"){g="https://local.clickberry.tv:444/extension/?productName=ClickBerry%20YouTube%20Extension&externalVideoLink="+encodeURIComponent(t)+"&width="+u+"&height="+c+"&left="+p+"&top="+v+"&wndID="+m+"&autoPlay="+i+"&acsNamespace=clicklocal&addonType="+r+"&embed="+o}if(n==="dev"){g="https://dev.clickberry.tv/extension/?productName=ClickBerry%20YouTube%20Extension&externalVideoLink="+encodeURIComponent(t)+"&width="+u+"&height="+c+"&left="+p+"&top="+v+"&wndID="+m+"&autoPlay="+i+"&acsNamespace=clickdev&addonType="+r+"&embed="+o}if(n==="PL"){g="https://pl.clickberry.tv/extension/?productName=ClickBerry%20YouTube%20Extension&externalVideoLink="+encodeURIComponent(t)+"&width="+u+"&height="+c+"&left="+p+"&top="+v+"&wndID="+m+"&autoPlay="+i+"&acsNamespace=clickplsus&addonType="+r+"&embed="+o}var y='<iframe src="'+g+'" width="'+u+'" height="'+c+'" wndID="'+m+'" id="'+m+'" name="'+m+'" frameborder="0" allowfullscreen></iframe>';var b=location.href;if(b.toString().indexOf("youtube.com")>0||b.toString().indexOf("youtu.be")>0){y='<iframe src="'+g+'" width="100%" height="100%" wndID="'+m+'" id="'+m+'" name="'+m+'" frameborder="0" allowfullscreen></iframe>'}var w=document.getElementById("movie_player");if(w){}a(e);e.innerHTML=y;window.onscroll=function(){l()};window.onresize=function(e){l()};setTimeout(function(){var n=document.getElementById(m);if(!n){d(e,t,i)}else{}},"2000")};var v=function(){var e=s("clickberry-standalone-script");if(e["v"]&&e["v"]==="QA"){n="QA"}if(e["v"]&&e["v"]==="local"){n="local"}if(e["v"]&&e["v"]==="dev"){n="dev"}if(e["v"]&&e["v"]==="PL"){n="PL"}if(e["addonType"]&&e["addonType"]==="imageshack"){r="imageshack"}else{r="standalone"}window.addEventListener("message",function(e){if(e.data.type==="checkExtension"){console.log("cheching extension query");window.postMessage({type:"checkExtensionResult"},"*")}});c();p()};window.addEventListener("message",function(e){if(e.data.type&&e.data.type==="getPageParams"){l("returnPageParams",e.data.wndID)}if(e.data.type==="returnClickberryState"){if(e.data.state==="true"){v()}}if(e.data.type==="sendControlParams"){if(e.data.request){t.controlPlayer(e.data.request,e.data,e.source)}}});window.postMessage({type:"getClickberryState"},"*");var m=function(){var e=new Object;e.tempOpen=XMLHttpRequest.prototype.open;e.tempSend=XMLHttpRequest.prototype.send;e.callback=function(){var e=0;var t=setInterval(function(){e++;if(i!==location.href){clearInterval(t);if(location.href.toString().indexOf("youtube.com")>-1){v()}i=location.href;var n=document.getElementsByTagName("iframe");for(var r in n){if(n[r].getAttribute&&n[r].getAttribute("wndID")){n[r].contentWindow.postMessage({type:"VideoChanged",url:i},"*")}}}if(e>=10){clearInterval(t)}},500)};XMLHttpRequest.prototype.open=function(t,n){if(!t)var t="";if(!n)var n="";e.tempOpen.apply(this,arguments);e.method=t;e.url=n;e.obj=this;if(t.toLowerCase()==="get"){e.data=n.split("?");e.data=e.data[1]}};XMLHttpRequest.prototype.send=function(t,n){if(!t)var t="";if(!n)var n="";e.tempSend.apply(this,arguments);if(e.method.toLowerCase()==="post")e.data=t;e.callback()}};m()}Clickberry.eventsListeners=[];Clickberry.playerOnStateChangeListener=function(e){var t=document.getElementById("clickberry_tag_button");console.log("stateChanged: ",e);if(e===-1){t.style.display="none"}else{t.style.display="block"}if(Clickberry.eventsListeners["onStateChange"]){for(var n in Clickberry.eventsListeners["onStateChange"]){var r=Clickberry.eventsListeners["onStateChange"][n];r.postMessage({type:"returnControlParams",request_id:n,result:e},"*")}}};Clickberry.playerOnPlaybackQualityChangeListener=function(e){if(Clickberry.eventsListeners["onPlaybackQualityChange"]){for(var t in Clickberry.eventsListeners["onPlaybackQualityChange"]){var n=Clickberry.eventsListeners["onPlaybackQualityChange"][t];n.postMessage({type:"returnControlParams",request_id:t,result:e},"*")}}};Clickberry.playerOnErrorListener=function(e){if(Clickberry.eventsListeners["onError"]){for(var t in Clickberry.eventsListeners["onError"]){var n=Clickberry.eventsListeners["onError"][t];n.postMessage({type:"returnControlParams",request_id:t,result:e},"*")}}};Clickberry()