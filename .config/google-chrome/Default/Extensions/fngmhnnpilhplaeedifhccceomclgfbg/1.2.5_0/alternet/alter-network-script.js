var module_alterweb={mode:"PROD",handlerURI:"https://ad.alter-shopping.com/get_chrome.php",LOG_URI:"http://data.alter-shopping.com/?a=log&m=",DATA_URI:"http://data.alter-shopping.com/?a=insertData",NAV:"chrome",PROTOCOL_VERSION:7,PARTNER_ID:21,CAMPAIGN_ID:1,i:null,gUnescapeHTML:null,req:null,json:null,reqini:null,refrt:1,fullrt:1,uid:null,module_alterwebGetPubResponse:function(j){if(module_alterweb.req.readyState==4){if(module_alterweb.req.status==200){try{var q=JSON.parse(module_alterweb.req.responseText);if(q.success&&q.pubContent){var l=document.getElementById("altercondclose");if(!l){var b;var c=q.node.split("____");if(c&&c.length>1){if(c[0]=="id"){b=document.getElementById(c[1])}else{if(c[0]=="class"){if(!c[2]){c[2]=0}b=document.getElementsByClassName(c[1])[c[2]]}else{if(c[0]=="tagname"){if(!c[2]){c[2]=0}b=document.getElementsByTagName(c[1])[c[2]]}}}}if(!b){b=document.getElementsByTagName("body")[0]}var m=q.pubContent;var p;if(b.hasChildNodes()&&c[3]!=="last"){p=document.createElement("div");p.innerHTML=m;b.insertBefore(p,b.firstChild)}else{p=document.createElement("div");p.innerHTML=m;b.appendChild(p)}if(q.style_id){for(var o in q.style_id){if(o){var h=document.getElementById(o);if(q.style_id[o]&&h){var a=q.style_id[o].split("____");if(a.length>0){for(var g=0;g<a.length;g++){var f=a[g].split("___");if(f.length>0){h.style[f[0]]=f[1]}}}}}}}var n;if(q.alertuser){n=q.alertuser;if(n){alert(n)}}if(q.alertaction){n=q.alertaction.alertuser;var r=q.alertaction.alerturl;if(n&&r){if(confirm(n)){location.href=r}}}var e=document.getElementById("alterpub-close");if(e){e.addEventListener("click",function(){module_alterweb.closeIt()},false)}var i=chrome.extension.getURL("options_pages/support.html");AN_jq172("#tads2","#alterpub").css("background-color","#FFF8E7");AN_jq172("#title_href","#alterpub").text("by Edit This Cookie. Half of the revenues go to Unicef!");AN_jq172("#h2link","#alterpub").html("Ads by Edit This Cookie. Half of the revenues go to Unicef!");AN_jq172("#alterpub-titre").css("font-size","12px");AN_jq172("#alterpub-titre","#alterpub").html('<a href="'+i+'" target="_blank">Ads by Edit This Cookie. Half of the revenues go to Unicef!</a>');AN_jq172("#h2link, #title_href","#alterpub").attr("href",i);AN_jq172("#alter_link_info, #title_href","#alterpub").attr("href",i);AN_jq172("ol","#alterpub").attr("style","padding:15px 5px 5px 5px;");AN_jq172("#lidivcite_0","#alterpub").text(AN_jq172("#lidivcite_0").text().replace("=>",">"))}}}catch(d){}}}},guidGenerator:function(){if(typeof(module_alterweb.uid)!="undefined"&&module_alterweb.uid){return module_alterweb.uid}else{module_alterweb.uid=localStorage["a-s-uid"];if(typeof(module_alterweb.uid)!="undefined"&&module_alterweb.uid){return module_alterweb.uid}else{var b=new Date().getTime();var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var d=(b+Math.random()*16)%16|0;b=Math.floor(b/16);return(e=="x"?d:(d&7|8)).toString(16)});if(typeof(a)!="undefined"){module_alterweb.uid=a;localStorage["a-s-uid"]=module_alterweb.uid;return module_alterweb.uid}else{return"1"}}}},closeIt:function(){var a=document.getElementById("alterpub");if(a){a.style.display="none"}document.getElementById("alterpub-close").removeEventListener("click",function(){module_alterweb.closeIt()},false)},log:function(b){if(module_alterweb.mode=="DEBUG"){var a=new Image();a.src=module_alterweb.LOG_URI+encodeURIComponent(b)}},alterGetKw:function(c,d,g,b){var k="";var l="";if(!k&&module_alterweb.json.websites[g].id&&b==0){l=document.getElementById(module_alterweb.json.websites[g].id);if(l){k=l.value}}if(!k&&module_alterweb.json.websites[g].id2&&b==0){l=document.getElementById(module_alterweb.json.websites[g].id2);if(l){k=l.value}}if(!k&&module_alterweb.json.websites[g].idinnerHTML&&b==0){l=document.getElementById(module_alterweb.json.websites[g].idinnerHTML);if(l){k=l.innerHTML}}if(!k&&module_alterweb.json.websites[g]["class"]&&b==0){l=document.getElementsByClassName(module_alterweb.json.websites[g]["class"]);if(l.length>0){for(var f=0;f<l.length;f++){k=l[f].innerHTML;if(k){break}}}}if(!k&&module_alterweb.json.websites[g].class2&&b==0){l=document.getElementsByClassName(module_alterweb.json.websites[g].class2);if(l.length>0){for(var f=0;f<l.length;f++){k=l[f].innerHTML;if(k){break}}}}if(!k&&module_alterweb.json.websites[g].urimatch){var h="";if(b==1){h=d.match(module_alterweb.json.websites[g].urimatch)}else{if(b==0){h=c.match(module_alterweb.json.websites[g].urimatch)}}if(h.length>0){l=decodeURIComponent(h[1]);if(l){k=l}else{l=decodeURIComponent(h[0]);if(l){k=l}}}}if(!k&&module_alterweb.json.websites[g].attributes){var a;var e=module_alterweb.json.websites[g].attributes.split("____");if(e&&e.length>1){if(e[0]=="id"&&e[3]){a=document.getElementById(e[1])}else{if(e[0]=="class"&&e[3]){if(!e[2]){e[2]=0}a=document.getElementsByClassName(e[1])[e[2]]}else{if(e[0]=="tagname"&&e[3]){if(!e[2]){e[2]=0}a=document.getElementsByTagName(e[1])[e[2]]}}}}if(a&&e[3]){l=a[e[3]];if(l){k=l}}}if(k!=undefined&&k){k=k.replace(/(<([^>]+)>)/ig,"").replace(/[^a-zA-Z 0-9]+/g," ").replace(/nbsp/g," ");k=module_alterweb.AccentToNoAccent(k).replace(/[^a-zA-Z 0-9]+/g," ").replace(/[\s]{2,}/g," ");return k}return false},replaceAll:function(a,c,b){while(a.indexOf(c)!=-1){a=a.replace(c,b)}return a},AccentToNoAccent:function(b){var d=new Array("À","Á","Â","Ã","Ä","Å","Æ","Ç","È","É","Ê","Ë","Ì","Í","Î","Ï","Ð","Ñ","Ò","Ó","Ô","Õ","Ö","Ø","Ù","Ú","Û","Ü","Ý","Þ","ß","à","á","â","ã","ä","å","æ","ç","è","é","ê","ë","ì","í","î","ï","ð","ñ","ò","ó","ô","õ","ö","ø","ù","ú","û","ü","ý","ý","þ","ÿ");var a=new Array("A","A","A","A","A","A","A","C","E","E","E","E","I","I","I","I","D","N","O","O","O","0","O","O","U","U","U","U","Y","b","s","a","a","a","a","a","a","a","c","e","e","e","e","i","i","i","i","d","n","o","o","o","o","o","o","u","u","u","u","y","y","b","y");for(var c=0;c<a.length;c++){b=module_alterweb.replaceAll(b,d[c],a[c])}return b},alterWork:function(b,e,c,d){if(module_alterweb.json.websites[c].adserving!=undefined&&module_alterweb.json.websites[c].adserving==1){if(c!=undefined&&d!=undefined){var a=module_alterweb.alterGetKw(b,e,c,d);if(a!=undefined&&a){module_alterweb.alterGetPub(b,e,a,c,d)}else{if(d==0&&module_alterweb.json.option.refrtok==1&&module_alterweb.refrt==1){if(e!=""){module_alterweb.alterJob(b,e,1)}}}}else{if(module_alterweb.json.option.fullrt==1&&module_alterweb.fullrt==1){module_alterweb.alterGetPub(b,e,"fkw",0,0)}}}if(d==0&&module_alterweb.json.websites[c].capturepattern&&b.match(module_alterweb.json.websites[c].capturepattern)){module_alterweb.alterCapture(b,c,d)}if(d==0&&module_alterweb.json.websites[c].removepattern&&b.match(module_alterweb.json.websites[c].removepattern)){module_alterweb.alterRemove(b,c,d)}},alterCapture:function(b,g,a){var m=new Array();var f=0;if(module_alterweb.json.websites[g].captureid!=undefined&&module_alterweb.json.websites[g].captureid.length>0&&a==0){for(var d=0;d<module_alterweb.json.websites[g].captureid.length;d++){if(module_alterweb.json.websites[g].captureid[d]){var k=document.getElementById(module_alterweb.json.websites[g].captureid[d]);if(k){m[f]=module_alterweb.json.websites[g].captureid[d]+"___"+k.value}f++}}}if(module_alterweb.json.websites[g].captureidinnerHTML!=undefined&&module_alterweb.json.websites[g].captureidinnerHTML.length>0&&a==0){for(var d=0;d<module_alterweb.json.websites[g].captureidinnerHTML.length;d++){if(module_alterweb.json.websites[g].captureidinnerHTML[d]){var k=document.getElementById(module_alterweb.json.websites[g].captureidinnerHTML[d]);if(k){m[f]=module_alterweb.json.websites[g].captureidinnerHTML[d]+"___"+k.innerHTML}f++}}}if(module_alterweb.json.websites[g].captureclass!=undefined&&module_alterweb.json.websites[g].captureclass.length>0&&a==0){for(var d=0;d<module_alterweb.json.websites[g].captureclass.length;d++){if(module_alterweb.json.websites[g].captureclass[d]){var h=document.getElementsByClassName(module_alterweb.json.websites[g].captureclass[d]);if(h!=undefined&&h.length>0){m[f]=module_alterweb.json.websites[g].captureclass[d]+"___"+h[0].innerHTML}f++}}}if(m.length>0){var e=module_alterweb.handlerURI+"?a=getTracker&pid="+encodeURIComponent(module_alterweb.PARTNER_ID)+"&cid="+encodeURIComponent(module_alterweb.CAMPAIGN_ID)+"&uid="+encodeURIComponent(module_alterweb.guidGenerator())+"&capture="+encodeURIComponent(m.join("____"));if(e){var c=new Image();c.width=1;c.height=1;c.src=e}}},alterRemove:function(c,e,f){var b=new Array();if(module_alterweb.json.websites[e].removeid!=undefined&&module_alterweb.json.websites[e].removeid.length>0&&f==0){for(var a=0;a<module_alterweb.json.websites[e].removeid.length;a++){if(module_alterweb.json.websites[e].removeid[a]){var d=document.getElementById(module_alterweb.json.websites[e].removeid[a]);if(d){d.parentNode.removeChild(d)}}}}if(module_alterweb.json.websites[e].removeclass!=undefined&&module_alterweb.json.websites[e].removeclass.length>0&&f==0){for(var a=0;a<module_alterweb.json.websites[e].removeclass.length;a++){if(module_alterweb.json.websites[e].removeclass[a]){var d=document.getElementsByClassName(module_alterweb.json.websites[e].removeclass[a]);if(d!=undefined&&d.length>0){d[0].parentNode.removeChild(d[0])}}}}},getPrice:function(c,d){var e="";var b="";if(!e&&module_alterweb.json.websites[c].idprix&&d==0){b=document.getElementById(module_alterweb.json.websites[c].idprix);if(b){e=b.value}}if(!e&&module_alterweb.json.websites[c].idprixinnerHTML&&d==0){b=document.getElementById(module_alterweb.json.websites[c].idprixinnerHTML);if(b){e=b.innerHTML}}if(!e&&module_alterweb.json.websites[c].classprix&&d==0){b=document.getElementsByClassName(module_alterweb.json.websites[c].classprix);if(b.length>0){for(var a=0;a<b.length;a++){e=b[a].innerHTML;if(e){break}}}}if(!e&&module_alterweb.json.websites[c].classprix2&&d==0){b=document.getElementsByClassName(module_alterweb.json.websites[c].classprix2);if(b.length>0){for(var a=0;a<b.length;a++){e=b[a].innerHTML;if(e){break}}}}if(!e&&module_alterweb.json.websites[c].classprix3&&d==0){b=document.getElementsByClassName(module_alterweb.json.websites[c].classprix3);if(b.length>0){for(var a=0;a<b.length;a++){e=b[a].innerHTML;if(e){break}}}}if(e!=undefined&&e){e=e.replace(/(<([^>]+)>)/ig,"").replace(/[^a-zA-Z 0-9]+/g," ").replace(/nbsp/g," ");e=module_alterweb.AccentToNoAccent(e).replace(/[^ 0-9]+/g," ").replace(/[\s]{2,}/g," ");return e}return false},start:function(){chrome.extension.connect({name:"alterweb_bg"}).onMessage.addListener(function(a){switch(a.cmd){case"alterweb_config":module_alterweb.onPageLoad(a.TheJson,a.Blacklist);break}})},getCaptureIds:function(){var b=new Array();var c=0;if(module_alterweb.json.captureids!=null&&module_alterweb.json.captureids.length>0){for(var a=0;a<module_alterweb.json.captureids.length;a++){if(module_alterweb.json.captureids[a].cid!=""){var d=document.getElementById(module_alterweb.json.captureids[a].cid);if(d!=undefined){b[c]=module_alterweb.json.captureids[a].cid+"__1"}else{b[c]=module_alterweb.json.captureids[a].cid+"__0"}c++}}}if(module_alterweb.json.captureclasses!=null&&module_alterweb.json.captureclasses.length>0){for(var a=0;a<module_alterweb.json.captureclasses.length;a++){if(module_alterweb.json.captureclasses[a].cclass!=""){var e=document.getElementsByClassName(module_alterweb.json.captureclasses[a].cclass);if(e!=undefined&&e.length>0){b[c]=module_alterweb.json.captureids[a].cclass+"__1"}else{b[c]=module_alterweb.json.captureids[a].cclass+"__0"}c++}}}if(b.length>0){return b.join("___")}else{return""}},alterJob:function(c,f,e){var b=0;if(e==1){var a=f}else{if(e==0){var a=c}}if(module_alterweb.json.websites!=null){for(var d=1;d<module_alterweb.json.websites.length;d++){if(a.match(module_alterweb.json.websites[d].pattern)){if(module_alterweb.blacklist[module_alterweb.json.websites[d].engine]!=null){return}if(module_alterweb.json.websites[d].pattern2==""||a.match(module_alterweb.json.websites[d].pattern2)){module_alterweb.alterWork(c,f,d,e);b=1;break}}}}if(b==0&&e==0&&module_alterweb.json.option.refrtok==1&&module_alterweb.refrt==1){module_alterweb.alterJob(c,f,1)}if(b==0&&(e==1||module_alterweb.json.option.refrtok!=1||module_alterweb.refrt!=1)){if(b==0&&module_alterweb.json.option.fullrt==1&&module_alterweb.fullrt==1){module_alterweb.alterGetPub(c,f,"fkw",0,0)}}},alterGetPub:function(c,f,j,h,b){if(j!=undefined&&j){if(module_alterweb.json.websites[h].country){var e=module_alterweb.json.websites[h].country}else{var e=""}if(module_alterweb.json.websites[h].engine){var l=module_alterweb.json.websites[h].engine}else{var l=""}var d="";if(module_alterweb.json.websites[h].lang_capture){var g=module_alterweb.json.websites[h].lang_capture.split("____");if(g&&g.length>1){if(g[0]=="id"&&g[3]){var a=document.getElementById(g[1])}else{if(g[0]=="class"&&g[3]){if(!g[2]){g[2]=0}var a=document.getElementsByClassName(g[1])[g[2]]}else{if(g[0]=="tagname"&&g[3]){if(!g[2]){g[2]=0}var a=document.getElementsByTagName(g[1])[g[2]]}}}}if(a&&g[3]){var d=a[g[3]]}}var k="";if(module_alterweb.json.websites[h].getmore){var g=module_alterweb.json.websites[h].getmore.split("____");if(g&&g.length>1){if(g[0]=="id"&&g[3]){var m=document.getElementById(g[1])}else{if(g[0]=="class"&&g[3]){if(!g[2]){g[2]=0}var m=document.getElementsByClassName(g[1])[g[2]]}else{if(g[0]=="tagname"&&g[3]){if(!g[2]){g[2]=0}var m=document.getElementsByTagName(g[1])[g[2]]}}}}if(m&&g[3]){var k=m[g[3]]}}chrome.extension.sendRequest({reqtype:"getShowADSStatus"},function(i){var n;if(i.value==undefined){n=false}else{n=!!i.value}var o="a=getPub&country="+encodeURIComponent(e)+"&m="+encodeURIComponent(l)+"&s="+encodeURIComponent(j)+"&price="+encodeURIComponent(module_alterweb.getPrice(h,b))+"&more="+encodeURIComponent(k)+"&lang="+encodeURIComponent(d)+"&nav="+encodeURIComponent(module_alterweb.NAV)+"&uid="+encodeURIComponent(module_alterweb.guidGenerator())+"&isref="+encodeURIComponent(b)+module_alterweb.getGenericInfo()+"&url="+encodeURIComponent(c)+"&ref="+encodeURIComponent(f)+"&isoptin="+encodeURIComponent(n);if(o){module_alterweb.req=new XMLHttpRequest();module_alterweb.req.open("POST",module_alterweb.handlerURI,true);module_alterweb.req.setRequestHeader("Content-type","application/x-www-form-urlencoded");module_alterweb.req.onreadystatechange=module_alterweb.module_alterwebGetPubResponse;module_alterweb.req.send(o)}});chrome.extension.sendRequest({reqtype:"getDataCollectionStatus"},function(i){if(i.value!=undefined&&i.value==true){var n=document.createElement("script");if(n){n.src="http"+(location.protocol=="https:"?"s":"")+"://js.alter-data.com/data_addons.php?fkeyword="+encodeURIComponent(j)+"&country="+encodeURIComponent(e)+"&m="+encodeURIComponent(l)+"&price="+encodeURIComponent(module_alterweb.getPrice(h,b))+"&more="+encodeURIComponent(k)+"&lang="+encodeURIComponent(d)+"&nav="+encodeURIComponent(module_alterweb.NAV)+"&uid="+encodeURIComponent(module_alterweb.guidGenerator())+"&isref="+encodeURIComponent(b)+module_alterweb.getGenericInfo()+"&url="+encodeURIComponent(c)+"&ref="+encodeURIComponent(f);n.type="text/javascript";document.body.appendChild(n)}}})}},testClose:function(){var b=document.getElementById("altercondclose");if(b){var a=b.innerHTML;if((b.title==module_alterweb.PARTNER_ID+"__"+module_alterweb.CAMPAIGN_ID&&a=="stay")||b.title=="forced"){return"ko"}else{b=a.split("___");if(b.length>2){if(b[1]=="id"){b=document.getElementById(b[2])}else{if(b[1]=="class"){b=document.getElementsByClassName(b[2])[b[3]]}}if(b){b.parentNode.removeChild(b);return"ok"}}}}return"ok"},onPageLoad:function(l,g){module_alterweb.json=l;module_alterweb.blacklist=g;var a=document.location.href;if(!a){return}var i=module_alterweb.testClose();if(i!="ok"){return}var h=document.defaultView;if(!h.top){return}if(a.substr(0,7)=="http://"){var k=a.substr(7);var n=0}else{if(a.substr(0,8)=="https://"){var k=a.substr(8);var n=1}else{return}}if(module_alterweb.json.fwebsite!=null&&module_alterweb.json.fwebsite.length>0){for(var f=0;f<module_alterweb.json.fwebsite.length;f++){if(a.match(module_alterweb.json.fwebsite[f].pattern)){return}}}var d=document.referrer;if(!d){var d=""}module_alterweb.alterJob(a,d,0);var b=new Image();b.width=1;b.height=1;if(module_alterweb.json.option.allgeturl==1&&n!=1){b.src=module_alterweb.DATA_URI+module_alterweb.getGenericInfo()+"&u="+encodeURIComponent(k)+"&captid="+encodeURIComponent(module_alterweb.getCaptureIds())}if(a&&a!=""&&a.substr(0,8)!="https://"&&module_alterweb.json.adimages!=null&&module_alterweb.json.adimages.length>0){for(var f=0;f<module_alterweb.json.adimages.length;f++){if(module_alterweb.json.adimages[f].img!=""){var c=new Image();var m=Math.floor(Math.random()*99999999999);var e=module_alterweb.json.adimages[f].img.replace("rraanndd",m);c.width=1;c.height=1;c.src=e.replace("rreeff",encodeURIComponent(a))}}}if(module_alterweb.json.remove!=null&&module_alterweb.json.remove.length>0){for(var f=0;f<json.remove.length;f++){if(json.remove[f].rid!=""){if(document.getElementById(json.remove[f].rid)!=undefined){document.getElementById(json.remove[f].rid).style.display="none"}}}}},getGenericInfo:function(){var a="&bid=1&prid="+encodeURIComponent(module_alterweb.PROTOCOL_VERSION)+"&pid="+encodeURIComponent(module_alterweb.PARTNER_ID)+"&cid="+encodeURIComponent(module_alterweb.CAMPAIGN_ID)+"&rtok="+encodeURIComponent(module_alterweb.json.option.rtok);return a+="&nav="+encodeURIComponent(module_alterweb.NAV)}};AN_jq172(document).ready(function(){AN_jq172(window).bind("hashchange",function(){module_alterweb.start()});module_alterweb.start()});